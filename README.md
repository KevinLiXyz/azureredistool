# Azure Redis 管理工具

一个基于Python和Tkinter的图形化Azure Redis管理工具，支持连接到Azure Redis服务并进行基本的数据管理操作。

## 功能特性

1. **连接管理**
   - 支持连接到Azure Redis服务
   - SSL连接支持
   - 快速连接（2秒超时）
   - 连接状态实时显示
   - 详细的错误信息提示

2. **数据浏览**
   - 列出所有Redis键值对
   - 显示数据类型（string, list, set, hash, zset）
   - 显示键值内容预览
   - 显示过期时间（TTL）
   - 显示数据大小
   - **单击键名查看完整值内容**

3. **数据操作**
   - 新增键值对（支持多种数据类型）
   - 编辑现有键值
   - 删除指定键
   - 设置过期时间

4. **搜索和过滤**
   - 按键名模糊搜索
   - 实时搜索结果更新

5. **性能优化**
   - 后台线程处理连接和数据加载
   - 使用Redis SCAN命令避免阻塞
   - 连接池提高连接复用
   - 异步操作避免界面卡顿
   - **分页加载**：支持大量键的分页显示
   - **超时处理**：智能处理长时间操作
   - **批量处理**：数据分批加载避免内存溢出

6. **大数据处理**
   - 支持数万个键的Redis实例
   - 分页浏览，每页可设置100-5000个键
   - 大值内容智能截断显示
   - 加载进度实时显示
   - 可中断长时间加载操作

## 安装要求

### Python环境
- Python 3.6 或更高版本
- tkinter（通常与Python一起安装）

### 依赖包
```bash
pip install redis
```

## 安装步骤

1. 克隆或下载项目文件
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行程序：
   ```bash
   python azure_redis_manager.py
   ```

## 使用说明

### 1. 连接到Redis
1. 启动程序后，在"Redis 连接设置"区域输入以下信息：
   - **主机地址**: Azure Redis服务的主机名（例如：your-cache.redis.cache.windows.net）
   - **端口**: 通常为6380（SSL）或6379（非SSL）
   - **密码**: Azure Redis的访问密钥
   - **SSL**: 对于Azure Redis，建议勾选此选项

2. 点击"连接"按钮建立连接

### 2. 浏览数据
连接成功后，程序会自动加载并显示Redis键值对信息：
- **Key**: 键名
- **类型**: 数据类型
- **值**: 键值内容（长内容会被截断显示）
- **过期时间**: TTL信息
- **大小**: 数据大小

**分页浏览**: 
- 支持大量键的分页显示，默认每页1000个键
- 可调整页大小：100、500、1000、2000、5000
- 上一页/下一页按钮快速翻页
- 显示当前页码和总页数

**加载优化**:
- 使用SCAN命令避免阻塞Redis服务
- 后台线程处理，不影响界面响应
- 显示加载进度和键数量统计
- 支持中途停止加载操作

**查看完整值**: 单击任意键名可在弹窗中查看该键的完整内容，支持：
- 格式化显示不同数据类型
- 大数据智能截断（超过10000项只显示前1000项）
- 实时刷新键值
- 复制内容到剪贴板
- 显示详细的键信息（TTL等）

### 3. 新增键值
1. 点击"新增 Key"按钮
2. 在弹出的对话框中输入：
   - 键名
   - 数据类型（string, list, set, hash）
   - 值内容
   - 可选：设置过期时间
3. 点击"确定"保存

#### 不同数据类型的值格式：
- **String**: 直接输入字符串值
- **List**: 每行一个列表元素
- **Set**: 每行一个集合元素  
- **Hash**: 每行一个field:value对，用冒号分隔

### 4. 编辑键值
1. 双击要编辑的项目，或选中后点击"编辑选中"
2. 在弹出的对话框中修改值
3. 点击确定保存更改

### 5. 删除键值
1. 选中要删除的项目
2. 点击"删除选中"按钮
3. 确认删除操作

### 6. 搜索功能
在搜索框中输入关键字可以按键名进行模糊搜索，支持实时搜索结果更新。

### 8. 分页功能
- **页面导航**: 使用上一页/下一页按钮浏览大量键
- **页大小设置**: 在100-5000之间选择每页显示的键数量
- **页面信息**: 显示当前页码和总页数
- **智能加载**: 只加载当前页面的数据，节省内存和时间

### 9. 性能优化功能
- **加载控制**: 可随时停止长时间的数据加载操作
- **进度显示**: 实时显示扫描和加载进度
- **超时处理**: 自动处理网络超时和长时间操作
- **批量处理**: 数据分批加载，避免界面卡顿

## 注意事项

1. **网络连接**: 确保能够访问Azure Redis服务的网络端点
2. **访问权限**: 确保使用的访问密钥具有足够的权限
3. **SSL证书**: Azure Redis服务通常需要SSL连接
4. **数据安全**: 谨慎处理生产环境数据，建议先在测试环境使用

## 故障排除

### 连接失败
- 检查主机地址和端口是否正确
- 验证访问密钥是否有效
- 确认网络连接正常
- 检查防火墙设置

### SSL连接问题
如果遇到 "AbstractConnection.__init__() got an unexpected keyword argument 'ssl'" 错误：

**解决方案 1: 使用修复工具**
```bash
python fix_redis_ssl.py          # 检查和修复Redis版本
python test_ssl_connection.py    # 测试SSL连接
```

**解决方案 2: 手动修复**
```bash
# 重新安装兼容版本的Redis
pip uninstall redis
pip install redis>=4.5.0,<6.0.0
```

**解决方案 3: 禁用SSL**
- 在连接设置中取消勾选"使用 SSL"选项
- 将端口改为6379（非SSL端口）
- 注意：只在测试环境中使用，生产环境建议使用SSL

### 数据加载超时
- **使用分页**: 将页大小设置为较小值（如100-500）
- **停止加载**: 点击"停止加载"按钮中断长时间操作
- **网络检查**: 确认网络连接稳定
- **服务器负载**: 检查Redis服务器是否过载

### 无法显示数据
- 确认Redis服务中确实存在数据
- 检查访问权限是否足够
- 尝试刷新数据
- 使用搜索功能缩小数据范围

### 大数据处理问题
- **内存不足**: 减小页大小设置
- **加载缓慢**: 使用搜索过滤减少数据量
- **界面卡顿**: 确保使用最新版本的工具
- **超时错误**: 检查网络延迟和Redis服务器性能

## 系统要求

- **操作系统**: Windows, macOS, Linux
- **Python**: 3.6+
- **内存**: 至少512MB可用内存
- **网络**: 能够访问Azure Redis服务

## 许可证

本项目仅供学习和测试使用。

## 贡献

欢迎提交Issue和Pull Request来改进这个工具。
